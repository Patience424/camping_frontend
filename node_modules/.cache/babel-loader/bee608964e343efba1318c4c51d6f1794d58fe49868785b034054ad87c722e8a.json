{"ast":null,"code":"export default {\n  name: 'UserReviews',\n  data() {\n    return {\n      reviews: [],\n      isLoading: true,\n      isDeleting: null,\n      showEditModal: false,\n      editedReview: {\n        id: null,\n        rating: 5,\n        comment: ''\n      },\n      isUpdating: false,\n      error: ''\n    };\n  },\n  methods: {\n    async fetchReviews() {\n      try {\n        this.isLoading = true;\n        const response = await this.$axios.get('/reviews/my-reviews');\n        this.reviews = response.data;\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: 'Failed to load reviews'\n        });\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    editReview(review) {\n      this.editedReview = {\n        id: review.id,\n        rating: review.rating,\n        comment: review.comment\n      };\n      this.showEditModal = true;\n    },\n    async updateReview() {\n      try {\n        this.isUpdating = true;\n        this.error = '';\n        if (!this.editedReview.comment) {\n          this.error = 'Please enter a comment';\n          return;\n        }\n        await this.$axios.put(`/reviews/${this.editedReview.id}`, {\n          rating: this.editedReview.rating,\n          comment: this.editedReview.comment\n        });\n\n        // Update review in the list\n        const index = this.reviews.findIndex(r => r.id === this.editedReview.id);\n        if (index !== -1) {\n          this.reviews[index] = {\n            ...this.reviews[index],\n            rating: this.editedReview.rating,\n            comment: this.editedReview.comment\n          };\n        }\n        this.showEditModal = false;\n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Review updated successfully'\n        });\n      } catch (error) {\n        this.error = error.response?.data?.message || 'Failed to update review';\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n    async deleteReview(id) {\n      try {\n        if (!confirm('Are you sure you want to delete this review?')) return;\n        this.isDeleting = id;\n        await this.$axios.delete(`/reviews/${id}`);\n\n        // Remove review from list\n        this.reviews = this.reviews.filter(r => r.id !== id);\n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Review deleted successfully'\n        });\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: error.response?.data?.message || 'Failed to delete review'\n        });\n      } finally {\n        this.isDeleting = null;\n      }\n    },\n    getFirstImage(images) {\n      try {\n        if (!images) return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n        if (typeof images === 'string') {\n          const parsedImages = JSON.parse(images);\n          if (Array.isArray(parsedImages) && parsedImages.length > 0) {\n            return parsedImages[0];\n          }\n          return images;\n        }\n        if (Array.isArray(images) && images.length > 0) {\n          return images[0];\n        }\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n      } catch (e) {\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n      }\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    }\n  },\n  mounted() {\n    this.fetchReviews();\n  }\n};","map":{"version":3,"names":["name","data","reviews","isLoading","isDeleting","showEditModal","editedReview","id","rating","comment","isUpdating","error","methods","fetchReviews","response","$axios","get","$store","commit","type","message","editReview","review","updateReview","put","index","findIndex","r","deleteReview","confirm","delete","filter","getFirstImage","images","parsedImages","JSON","parse","Array","isArray","length","e","formatDate","date","Date","toLocaleDateString","month","day","year","mounted"],"sources":["src/views/user/UserReviews.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-neutral-50 py-8\">\n    <div class=\"container mx-auto px-4\">\n      <h1 class=\"text-3xl font-bold mb-8\">Your Reviews</h1>\n      \n      <!-- Loading State -->\n      <div v-if=\"isLoading\" class=\"flex justify-center py-20\">\n        <svg class=\"animate-spin h-10 w-10 text-primary-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      </div>\n      \n      <!-- No Reviews -->\n      <div v-else-if=\"reviews.length === 0\" class=\"text-center py-20\">\n        <svg class=\"w-16 h-16 text-neutral-300 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\n        </svg>\n        <h3 class=\"text-xl font-semibold mb-2\">No reviews yet</h3>\n        <p class=\"text-neutral-600 mb-6\">Share your experiences and help others find great camping spots!</p>\n        <router-link to=\"/bookings\" class=\"btn-primary\">\n          View Your Bookings\n        </router-link>\n      </div>\n      \n      <!-- Reviews List -->\n      <div v-else class=\"space-y-6\">\n        <div \n          v-for=\"review in reviews\" \n          :key=\"review.id\" \n          class=\"bg-white rounded-lg shadow-md overflow-hidden\"\n        >\n          <div class=\"md:flex\">\n            <!-- Camping Spot Image -->\n            <div class=\"md:w-1/4 h-48 md:h-auto relative\">\n              <img \n                :src=\"getFirstImage(review.campingSpot.images)\" \n                :alt=\"review.campingSpot.name\"\n                class=\"w-full h-full object-cover\"\n              >\n            </div>\n            \n            <!-- Review Details -->\n            <div class=\"p-6 md:w-3/4\">\n              <div class=\"mb-4\">\n                <h3 class=\"text-xl font-bold mb-2\">{{ review.campingSpot.name }}</h3>\n                <p class=\"text-neutral-600 flex items-center mb-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fill-rule=\"evenodd\" d=\"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z\" clip-rule=\"evenodd\" />\n                  </svg>\n                  {{ review.campingSpot.location }}\n                </p>\n              </div>\n              \n              <!-- Rating -->\n              <div class=\"flex items-center mb-4\">\n                <div class=\"flex text-yellow-400\">\n                  <svg \n                    v-for=\"i in 5\" \n                    :key=\"i\"\n                    xmlns=\"http://www.w3.org/2000/svg\" \n                    class=\"h-5 w-5\" \n                    :class=\"i <= review.rating ? 'text-yellow-400' : 'text-neutral-200'\"\n                    viewBox=\"0 0 20 20\" \n                    fill=\"currentColor\"\n                  >\n                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                  </svg>\n                </div>\n                <span class=\"ml-2 text-sm text-neutral-500\">\n                  {{ formatDate(review.createdAt) }}\n                </span>\n              </div>\n              \n              <!-- Review Comment -->\n              <p class=\"text-neutral-700 mb-6\">{{ review.comment }}</p>\n              \n              <!-- Actions -->\n              <div class=\"flex flex-wrap gap-4\">\n                <router-link \n                  :to=\"`/camping-spots/${review.campingSpot.id}`\" \n                  class=\"btn-primary\"\n                >\n                  View Camping Spot\n                </router-link>\n                \n                <button \n                  @click=\"editReview(review)\"\n                  class=\"btn-outline\"\n                >\n                  Edit Review\n                </button>\n                \n                <button \n                  @click=\"deleteReview(review.id)\"\n                  class=\"btn-outline text-error border-error hover:bg-error/5\"\n                  :disabled=\"isDeleting === review.id\"\n                >\n                  <span v-if=\"isDeleting === review.id\">\n                    <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 inline-block\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                      <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Deleting...\n                  </span>\n                  <span v-else>Delete Review</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Edit Review Modal -->\n      <div \n        v-if=\"showEditModal\"\n        class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n      >\n        <div class=\"bg-white rounded-lg p-6 max-w-lg w-full mx-4\">\n          <h3 class=\"text-xl font-bold mb-4\">Edit Review</h3>\n          \n          <div class=\"mb-6\">\n            <label class=\"form-label\">Rating</label>\n            <div class=\"flex space-x-2\">\n              <button \n                v-for=\"i in 5\" \n                :key=\"i\"\n                @click=\"editedReview.rating = i\"\n                class=\"focus:outline-none\"\n              >\n                <svg \n                  xmlns=\"http://www.w3.org/2000/svg\" \n                  class=\"h-8 w-8\" \n                  :class=\"i <= editedReview.rating ? 'text-yellow-400' : 'text-neutral-200'\"\n                  viewBox=\"0 0 20 20\" \n                  fill=\"currentColor\"\n                >\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n          \n          <div class=\"mb-6\">\n            <label for=\"comment\" class=\"form-label\">Comment</label>\n            <textarea \n              id=\"comment\"\n              v-model=\"editedReview.comment\"\n              rows=\"4\"\n              class=\"form-input\"\n              :class=\"{ 'border-red-300': error }\"\n            ></textarea>\n            <p v-if=\"error\" class=\"form-error\">{{ error }}</p>\n          </div>\n          \n          <div class=\"flex justify-end space-x-4\">\n            <button \n              @click=\"showEditModal = false\"\n              class=\"btn-outline\"\n            >\n              Cancel\n            </button>\n            <button \n              @click=\"updateReview\"\n              class=\"btn-primary\"\n              :disabled=\"isUpdating\"\n            >\n              <span v-if=\"isUpdating\">\n                <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 inline-block\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                  <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Updating...\n              </span>\n              <span v-else>Update Review</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserReviews',\n  data() {\n    return {\n      reviews: [],\n      isLoading: true,\n      isDeleting: null,\n      showEditModal: false,\n      editedReview: {\n        id: null,\n        rating: 5,\n        comment: ''\n      },\n      isUpdating: false,\n      error: ''\n    }\n  },\n  methods: {\n    async fetchReviews() {\n      try {\n        this.isLoading = true\n        const response = await this.$axios.get('/reviews/my-reviews')\n        this.reviews = response.data\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: 'Failed to load reviews'\n        })\n      } finally {\n        this.isLoading = false\n      }\n    },\n    \n    editReview(review) {\n      this.editedReview = {\n        id: review.id,\n        rating: review.rating,\n        comment: review.comment\n      }\n      this.showEditModal = true\n    },\n    \n    async updateReview() {\n      try {\n        this.isUpdating = true\n        this.error = ''\n        \n        if (!this.editedReview.comment) {\n          this.error = 'Please enter a comment'\n          return\n        }\n        \n        await this.$axios.put(`/reviews/${this.editedReview.id}`, {\n          rating: this.editedReview.rating,\n          comment: this.editedReview.comment\n        })\n        \n        // Update review in the list\n        const index = this.reviews.findIndex(r => r.id === this.editedReview.id)\n        if (index !== -1) {\n          this.reviews[index] = {\n            ...this.reviews[index],\n            rating: this.editedReview.rating,\n            comment: this.editedReview.comment\n          }\n        }\n        \n        this.showEditModal = false\n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Review updated successfully'\n        })\n      } catch (error) {\n        this.error = error.response?.data?.message || 'Failed to update review'\n      } finally {\n        this.isUpdating = false\n      }\n    },\n    \n    async deleteReview(id) {\n      try {\n        if (!confirm('Are you sure you want to delete this review?')) return\n        \n        this.isDeleting = id\n        await this.$axios.delete(`/reviews/${id}`)\n        \n        // Remove review from list\n        this.reviews = this.reviews.filter(r => r.id !== id)\n        \n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Review deleted successfully'\n        })\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: error.response?.data?.message || 'Failed to delete review'\n        })\n      } finally {\n        this.isDeleting = null\n      }\n    },\n    \n    getFirstImage(images) {\n      try {\n        if (!images) return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n        \n        if (typeof images === 'string') {\n          const parsedImages = JSON.parse(images)\n          if (Array.isArray(parsedImages) && parsedImages.length > 0) {\n            return parsedImages[0]\n          }\n          return images\n        }\n        \n        if (Array.isArray(images) && images.length > 0) {\n          return images[0]\n        }\n        \n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n      } catch (e) {\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n      }\n    },\n    \n    formatDate(date) {\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      })\n    }\n  },\n  mounted() {\n    this.fetchReviews()\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}