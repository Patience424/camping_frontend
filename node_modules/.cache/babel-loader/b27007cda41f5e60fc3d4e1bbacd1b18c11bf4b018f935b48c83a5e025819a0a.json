{"ast":null,"code":"export default {\n  name: 'UserBookingDetails',\n  props: {\n    id: {\n      type: [String, Number],\n      required: true\n    }\n  },\n  data() {\n    return {\n      booking: null,\n      isLoading: true,\n      isCancelling: false,\n      statusStyles: {\n        PENDING: {\n          bg: 'bg-yellow-100 text-yellow-800'\n        },\n        CONFIRMED: {\n          bg: 'bg-green-100 text-green-800'\n        },\n        CANCELLED: {\n          bg: 'bg-red-100 text-red-800'\n        },\n        COMPLETED: {\n          bg: 'bg-blue-100 text-blue-800'\n        }\n      }\n    };\n  },\n  computed: {\n    canReview() {\n      if (!this.booking) return false;\n      return this.booking.status === 'COMPLETED' && new Date(this.booking.endDate) < new Date();\n    }\n  },\n  methods: {\n    async fetchBooking() {\n      try {\n        this.isLoading = true;\n        const response = await this.$axios.get(`/bookings/${this.id}`);\n        this.booking = response.data;\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: 'Failed to load booking details'\n        });\n        if (error.response?.status === 404) {\n          this.booking = null;\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async cancelBooking() {\n      try {\n        if (!confirm('Are you sure you want to cancel this booking?')) return;\n        this.isCancelling = true;\n        await this.$axios.put(`/bookings/${this.id}/cancel`);\n        this.booking.status = 'CANCELLED';\n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Booking cancelled successfully'\n        });\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: error.response?.data?.message || 'Failed to cancel booking'\n        });\n      } finally {\n        this.isCancelling = false;\n      }\n    },\n    getFirstImage(images) {\n      try {\n        if (!images) return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n        if (typeof images === 'string') {\n          const parsedImages = JSON.parse(images);\n          if (Array.isArray(parsedImages) && parsedImages.length > 0) {\n            return parsedImages[0];\n          }\n          return images;\n        }\n        if (Array.isArray(images) && images.length > 0) {\n          return images[0];\n        }\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n      } catch (e) {\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600';\n      }\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('en-US', {\n        weekday: 'short',\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    },\n    formatPrice(price) {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      }).format(price);\n    }\n  },\n  mounted() {\n    this.fetchBooking();\n  }\n};","map":{"version":3,"names":["name","props","id","type","String","Number","required","data","booking","isLoading","isCancelling","statusStyles","PENDING","bg","CONFIRMED","CANCELLED","COMPLETED","computed","canReview","status","Date","endDate","methods","fetchBooking","response","$axios","get","error","$store","commit","message","cancelBooking","confirm","put","getFirstImage","images","parsedImages","JSON","parse","Array","isArray","length","e","formatDate","date","toLocaleDateString","weekday","month","day","year","formatPrice","price","Intl","NumberFormat","style","currency","format","mounted"],"sources":["src/views/user/UserBookingDetails.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-neutral-50 py-8\">\n    <div class=\"container mx-auto px-4\">\n      <!-- Loading State -->\n      <div v-if=\"isLoading\" class=\"flex justify-center py-20\">\n        <svg class=\"animate-spin h-10 w-10 text-primary-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      </div>\n      \n      <!-- Booking Details -->\n      <div v-else-if=\"booking\" class=\"max-w-4xl mx-auto\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-8\">\n          <h1 class=\"text-3xl font-bold\">Booking Details</h1>\n          <div \n            :class=\"[\n              'px-4 py-2 rounded-full text-sm font-medium',\n              statusStyles[booking.status].bg\n            ]\"\n          >\n            {{ booking.status }}\n          </div>\n        </div>\n        \n        <!-- Camping Spot Info -->\n        <div class=\"bg-white rounded-lg shadow-md overflow-hidden mb-8\">\n          <div class=\"md:flex\">\n            <div class=\"md:w-1/3\">\n              <img \n                :src=\"getFirstImage(booking.campingSpot.images)\" \n                :alt=\"booking.campingSpot.name\"\n                class=\"w-full h-64 object-cover\"\n              >\n            </div>\n            <div class=\"p-6 md:w-2/3\">\n              <h2 class=\"text-2xl font-bold mb-2\">{{ booking.campingSpot.name }}</h2>\n              <p class=\"text-neutral-600 flex items-center mb-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fill-rule=\"evenodd\" d=\"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z\" clip-rule=\"evenodd\" />\n                </svg>\n                {{ booking.campingSpot.location }}\n              </p>\n              <p class=\"text-neutral-600 mb-6\">{{ booking.campingSpot.description }}</p>\n              <router-link \n                :to=\"`/camping-spots/${booking.campingSpot.id}`\" \n                class=\"text-primary-600 hover:text-primary-700 font-medium\"\n              >\n                View Camping Spot\n              </router-link>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Booking Info -->\n        <div class=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <h3 class=\"text-xl font-bold mb-6\">Booking Information</h3>\n          \n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <p class=\"text-sm text-neutral-500 mb-1\">Check-in</p>\n              <p class=\"font-medium\">{{ formatDate(booking.startDate) }}</p>\n            </div>\n            \n            <div>\n              <p class=\"text-sm text-neutral-500 mb-1\">Check-out</p>\n              <p class=\"font-medium\">{{ formatDate(booking.endDate) }}</p>\n            </div>\n            \n            <div>\n              <p class=\"text-sm text-neutral-500 mb-1\">Number of Guests</p>\n              <p class=\"font-medium\">{{ booking.guestCount }} {{ booking.guestCount === 1 ? 'guest' : 'guests' }}</p>\n            </div>\n            \n            <div>\n              <p class=\"text-sm text-neutral-500 mb-1\">Total Price</p>\n              <p class=\"font-medium\">{{ formatPrice(booking.totalPrice) }}</p>\n            </div>\n          </div>\n          \n          <div v-if=\"booking.specialRequests\" class=\"mt-6\">\n            <p class=\"text-sm text-neutral-500 mb-1\">Special Requests</p>\n            <p class=\"font-medium\">{{ booking.specialRequests }}</p>\n          </div>\n        </div>\n        \n        <!-- Host Information -->\n        <div class=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <h3 class=\"text-xl font-bold mb-6\">Host Information</h3>\n          \n          <div class=\"flex items-center\">\n            <div class=\"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-semibold text-lg\">\n              {{ booking.campingSpot.owner.name[0].toUpperCase() }}\n            </div>\n            <div class=\"ml-4\">\n              <p class=\"font-medium\">{{ booking.campingSpot.owner.name }}</p>\n              <p class=\"text-neutral-600\">{{ booking.campingSpot.owner.email }}</p>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Actions -->\n        <div class=\"flex flex-wrap gap-4\">\n          <button \n            v-if=\"booking.status === 'PENDING' || booking.status === 'CONFIRMED'\"\n            @click=\"cancelBooking\"\n            class=\"btn-outline text-error border-error hover:bg-error/5\"\n            :disabled=\"isCancelling\"\n          >\n            <span v-if=\"isCancelling\">\n              <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 inline-block\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Cancelling...\n            </span>\n            <span v-else>Cancel Booking</span>\n          </button>\n          \n          <router-link \n            v-if=\"canReview\"\n            :to=\"`/camping-spots/${booking.campingSpot.id}?review=true`\" \n            class=\"btn-primary\"\n          >\n            Write a Review\n          </router-link>\n        </div>\n      </div>\n      \n      <!-- Not Found -->\n      <div v-else class=\"text-center py-20\">\n        <svg class=\"w-16 h-16 text-neutral-300 mx-auto mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n        </svg>\n        <h3 class=\"text-xl font-semibold mb-2\">Booking not found</h3>\n        <p class=\"text-neutral-600 mb-6\">The booking you're looking for doesn't exist or you don't have access to it.</p>\n        <router-link to=\"/bookings\" class=\"btn-primary\">\n          View All Bookings\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserBookingDetails',\n  props: {\n    id: {\n      type: [String, Number],\n      required: true\n    }\n  },\n  data() {\n    return {\n      booking: null,\n      isLoading: true,\n      isCancelling: false,\n      statusStyles: {\n        PENDING: {\n          bg: 'bg-yellow-100 text-yellow-800'\n        },\n        CONFIRMED: {\n          bg: 'bg-green-100 text-green-800'\n        },\n        CANCELLED: {\n          bg: 'bg-red-100 text-red-800'\n        },\n        COMPLETED: {\n          bg: 'bg-blue-100 text-blue-800'\n        }\n      }\n    }\n  },\n  computed: {\n    canReview() {\n      if (!this.booking) return false\n      return this.booking.status === 'COMPLETED' && \n             new Date(this.booking.endDate) < new Date()\n    }\n  },\n  methods: {\n    async fetchBooking() {\n      try {\n        this.isLoading = true\n        const response = await this.$axios.get(`/bookings/${this.id}`)\n        this.booking = response.data\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: 'Failed to load booking details'\n        })\n        if (error.response?.status === 404) {\n          this.booking = null\n        }\n      } finally {\n        this.isLoading = false\n      }\n    },\n    \n    async cancelBooking() {\n      try {\n        if (!confirm('Are you sure you want to cancel this booking?')) return\n        \n        this.isCancelling = true\n        await this.$axios.put(`/bookings/${this.id}/cancel`)\n        \n        this.booking.status = 'CANCELLED'\n        \n        this.$store.commit('setNotification', {\n          type: 'success',\n          message: 'Booking cancelled successfully'\n        })\n      } catch (error) {\n        this.$store.commit('setNotification', {\n          type: 'error',\n          message: error.response?.data?.message || 'Failed to cancel booking'\n        })\n      } finally {\n        this.isCancelling = false\n      }\n    },\n    \n    getFirstImage(images) {\n      try {\n        if (!images) return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n        \n        if (typeof images === 'string') {\n          const parsedImages = JSON.parse(images)\n          if (Array.isArray(parsedImages) && parsedImages.length > 0) {\n            return parsedImages[0]\n          }\n          return images\n        }\n        \n        if (Array.isArray(images) && images.length > 0) {\n          return images[0]\n        }\n        \n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n      } catch (e) {\n        return 'https://images.pexels.com/photos/6271625/pexels-photo-6271625.jpeg?auto=compress&cs=tinysrgb&w=1600'\n      }\n    },\n    \n    formatDate(date) {\n      return new Date(date).toLocaleDateString('en-US', {\n        weekday: 'short',\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      })\n    },\n    \n    formatPrice(price) {\n      return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD'\n      }).format(price)\n    }\n  },\n  mounted() {\n    this.fetchBooking()\n  }\n}\n</script>"],"mappings":"AAkJA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA;MACAC,IAAA,GAAAC,MAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;MACAC,YAAA;MACAC,YAAA;QACAC,OAAA;UACAC,EAAA;QACA;QACAC,SAAA;UACAD,EAAA;QACA;QACAE,SAAA;UACAF,EAAA;QACA;QACAG,SAAA;UACAH,EAAA;QACA;MACA;IACA;EACA;EACAI,QAAA;IACAC,UAAA;MACA,UAAAV,OAAA;MACA,YAAAA,OAAA,CAAAW,MAAA,oBACA,IAAAC,IAAA,MAAAZ,OAAA,CAAAa,OAAA,QAAAD,IAAA;IACA;EACA;EACAE,OAAA;IACA,MAAAC,aAAA;MACA;QACA,KAAAd,SAAA;QACA,MAAAe,QAAA,cAAAC,MAAA,CAAAC,GAAA,mBAAAxB,EAAA;QACA,KAAAM,OAAA,GAAAgB,QAAA,CAAAjB,IAAA;MACA,SAAAoB,KAAA;QACA,KAAAC,MAAA,CAAAC,MAAA;UACA1B,IAAA;UACA2B,OAAA;QACA;QACA,IAAAH,KAAA,CAAAH,QAAA,EAAAL,MAAA;UACA,KAAAX,OAAA;QACA;MACA;QACA,KAAAC,SAAA;MACA;IACA;IAEA,MAAAsB,cAAA;MACA;QACA,KAAAC,OAAA;QAEA,KAAAtB,YAAA;QACA,WAAAe,MAAA,CAAAQ,GAAA,mBAAA/B,EAAA;QAEA,KAAAM,OAAA,CAAAW,MAAA;QAEA,KAAAS,MAAA,CAAAC,MAAA;UACA1B,IAAA;UACA2B,OAAA;QACA;MACA,SAAAH,KAAA;QACA,KAAAC,MAAA,CAAAC,MAAA;UACA1B,IAAA;UACA2B,OAAA,EAAAH,KAAA,CAAAH,QAAA,EAAAjB,IAAA,EAAAuB,OAAA;QACA;MACA;QACA,KAAApB,YAAA;MACA;IACA;IAEAwB,cAAAC,MAAA;MACA;QACA,KAAAA,MAAA;QAEA,WAAAA,MAAA;UACA,MAAAC,YAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAH,MAAA;UACA,IAAAI,KAAA,CAAAC,OAAA,CAAAJ,YAAA,KAAAA,YAAA,CAAAK,MAAA;YACA,OAAAL,YAAA;UACA;UACA,OAAAD,MAAA;QACA;QAEA,IAAAI,KAAA,CAAAC,OAAA,CAAAL,MAAA,KAAAA,MAAA,CAAAM,MAAA;UACA,OAAAN,MAAA;QACA;QAEA;MACA,SAAAO,CAAA;QACA;MACA;IACA;IAEAC,WAAAC,IAAA;MACA,WAAAxB,IAAA,CAAAwB,IAAA,EAAAC,kBAAA;QACAC,OAAA;QACAC,KAAA;QACAC,GAAA;QACAC,IAAA;MACA;IACA;IAEAC,YAAAC,KAAA;MACA,WAAAC,IAAA,CAAAC,YAAA;QACAC,KAAA;QACAC,QAAA;MACA,GAAAC,MAAA,CAAAL,KAAA;IACA;EACA;EACAM,QAAA;IACA,KAAAlC,YAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}