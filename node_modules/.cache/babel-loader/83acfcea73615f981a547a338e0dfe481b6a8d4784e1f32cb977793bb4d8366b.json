{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { userAPI } from '@/services/api';\nexport default {\n  __name: 'UserBookings',\n  setup(__props) {\n    const bookings = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n    onMounted(async () => {\n      try {\n        console.log('Fetching bookings...');\n        const response = await userAPI.getBookings();\n        console.log('Bookings API Response:', response);\n\n        // Check if response.data is an array\n        if (Array.isArray(response.data)) {\n          bookings.value = response.data;\n        } else if (response.data && typeof response.data === 'object') {\n          // If response.data is an object, it might be wrapped in a property\n          const data = response.data.bookings || response.data.data || [];\n          bookings.value = Array.isArray(data) ? data : [];\n        } else {\n          bookings.value = [];\n        }\n        console.log('Processed bookings:', bookings.value);\n      } catch (err) {\n        console.error('Failed to load bookings:', err);\n        error.value = err.response?.data?.message || 'Failed to load bookings';\n        bookings.value = [];\n      } finally {\n        loading.value = false;\n      }\n    });\n    return {\n      __sfc: true,\n      bookings,\n      loading,\n      error\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","userAPI","bookings","loading","error","console","log","response","getBookings","Array","isArray","data","value","err","message"],"sources":["UserBookings.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Your Bookings</h2>\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      Loading bookings...\r\n    </div>\r\n    <template v-else>\r\n      <div v-if=\"error\" class=\"error\">\r\n        {{ error }}\r\n      </div>\r\n      <template v-else>\r\n        <ul v-if=\"bookings && bookings.length > 0\">\r\n          <li v-for=\"booking in bookings\" :key=\"booking.id\">\r\n            {{ booking.campingSpot?.name || 'Unknown Spot' }}: {{ booking.startDate }} to {{ booking.endDate }}\r\n          </li>\r\n        </ul>\r\n        <p v-else>No bookings yet.</p>\r\n      </template>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { userAPI } from '@/services/api';\r\n\r\nconst bookings = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\nonMounted(async () => {\r\n  try {\r\n    console.log('Fetching bookings...');\r\n    const response = await userAPI.getBookings();\r\n    console.log('Bookings API Response:', response);\r\n    \r\n    // Check if response.data is an array\r\n    if (Array.isArray(response.data)) {\r\n      bookings.value = response.data;\r\n    } else if (response.data && typeof response.data === 'object') {\r\n      // If response.data is an object, it might be wrapped in a property\r\n      const data = response.data.bookings || response.data.data || [];\r\n      bookings.value = Array.isArray(data) ? data : [];\r\n    } else {\r\n      bookings.value = [];\r\n    }\r\n    \r\n    console.log('Processed bookings:', bookings.value);\r\n  } catch (err) {\r\n    console.error('Failed to load bookings:', err);\r\n    error.value = err.response?.data?.message || 'Failed to load bookings';\r\n    bookings.value = [];\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.loading, .error {\r\n  text-align: center;\r\n  padding: 1rem;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.loading {\r\n  color: #666;\r\n}\r\n\r\n.error {\r\n  color: #dc3545;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 4px;\r\n}\r\n</style>\r\n  "],"mappings":"AAuBA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,OAAO,QAAQ,gBAAgB;;;;IAExC,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,OAAO,GAAGJ,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMK,KAAK,GAAGL,GAAG,CAAC,IAAI,CAAC;IAEvBC,SAAS,CAAC,YAAY;MACpB,IAAI;QACFK,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QACnC,MAAMC,QAAQ,GAAG,MAAMN,OAAO,CAACO,WAAW,CAAC,CAAC;QAC5CH,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEC,QAAQ,CAAC;;QAE/C;QACA,IAAIE,KAAK,CAACC,OAAO,CAACH,QAAQ,CAACI,IAAI,CAAC,EAAE;UAChCT,QAAQ,CAACU,KAAK,GAAGL,QAAQ,CAACI,IAAI;QAChC,CAAC,MAAM,IAAIJ,QAAQ,CAACI,IAAI,IAAI,OAAOJ,QAAQ,CAACI,IAAI,KAAK,QAAQ,EAAE;UAC7D;UACA,MAAMA,IAAI,GAAGJ,QAAQ,CAACI,IAAI,CAACT,QAAQ,IAAIK,QAAQ,CAACI,IAAI,CAACA,IAAI,IAAI,EAAE;UAC/DT,QAAQ,CAACU,KAAK,GAAGH,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE;QAClD,CAAC,MAAM;UACLT,QAAQ,CAACU,KAAK,GAAG,EAAE;QACrB;QAEAP,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEJ,QAAQ,CAACU,KAAK,CAAC;MACpD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZR,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAES,GAAG,CAAC;QAC9CT,KAAK,CAACQ,KAAK,GAAGC,GAAG,CAACN,QAAQ,EAAEI,IAAI,EAAEG,OAAO,IAAI,yBAAyB;QACtEZ,QAAQ,CAACU,KAAK,GAAG,EAAE;MACrB,CAAC,SAAS;QACRT,OAAO,CAACS,KAAK,GAAG,KAAK;MACvB;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}